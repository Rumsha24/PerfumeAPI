@model PerfumeAPI.Models.HomeViewModel
@using PerfumeAPI.Models.Entities
@inject PerfumeAPI.Services.IImageService ImageService
@{
    ViewData["Title"] = "Luxury Perfumes | NOIRE ESSENCE";
}

<!-- Hero Carousel -->
<div class="hero-carousel">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <div class="hero-image" style="background-image: url('@Url.Content("~/images/products/1.jpg")')">
                <div class="hero-content">
                    <h1 class="display-3 fw-bold">ELEVATE YOUR SENSES</h1>
                    <p class="lead">Discover our exclusive collection of artisanal fragrances</p>
                    <a asp-controller="Product" asp-action="Index" class="btn btn-light btn-lg px-5">Explore Collection</a>
                </div>
            </div>
        </div>
        <div class="carousel-item">
            <div class="hero-image" style="background-image: url('@Url.Content("~/images/products/15.jpg")')">
                <div class="hero-content">
                    <h1 class="display-3 fw-bold">TIMELESS ELEGANCE</h1>
                    <p class="lead">Crafted with rare ingredients from around the world</p>
                    <a href="#" class="btn btn-light btn-lg px-5">New Arrivals</a>
                </div>
            </div>
        </div>
    </div>
    <button class="carousel-control prev">❮</button>
    <button class="carousel-control next">❯</button>
    <div class="carousel-indicators">
        <div class="indicator active"></div>
        <div class="indicator"></div>
    </div>
</div>

<!-- Brand Promise Badges -->
<div class="container my-5">
    <div class="row justify-content-center g-3">
        <div class="col-auto">
            <div class="badge bg-pink-light text-purple-dark">
                <i class="fas fa-gem me-2"></i>Luxury Scents
            </div>
        </div>
        <div class="col-auto">
            <div class="badge bg-pink-lighter text-purple-dark">
                <i class="fas fa-leaf me-2"></i>Natural Ingredients
            </div>
        </div>
        <div class="col-auto">
            <div class="badge bg-pink-lightest text-purple-dark border border-pink">
                <i class="fas fa-globe-europe me-2"></i>Sustainably Made
            </div>
        </div>
    </div>
</div>

<!-- Intro Text -->
<section class="container my-6 text-center">
    <p class="intro-text mx-auto">
        Discover the art of fragrance at Noire Essence, where each scent tells a story of elegance, identity, and timeless allure.
        Our carefully curated collection features the world's most exquisite perfumes and colognes, from iconic designer brands
        to exclusive niche creations.
    </p>
</section>

<!-- Featured Collections -->
<section class="container my-6">
    <h2 class="text-center mb-5">Featured Collections</h2>
    <div class="row g-4">
        <div class="col-md-4">
            <div class="collection-card">
                <h3><i class="fas fa-crown me-2"></i>Luxury Scents</h3>
                <ul class="collection-list">
                    <li><strong>Signature Collections</strong>: Our most beloved fragrances</li>
                    <li><strong>Designer Exclusives</strong>: Authentic perfumes from top fashion houses</li>
                    <li><strong>Niche Creations</strong>: Rare, artisanal scents</li>
                </ul>
            </div>
        </div>
        <div class="col-md-4">
            <div class="collection-card">
                <h3><i class="fas fa-star me-2"></i>New Arrivals</h3>
                <ul class="collection-list">
                    <li><strong>Seasonal Limited Editions</strong>: Capture the essence of each season</li>
                    <li><strong>Emerging Brands</strong>: Discover tomorrow's iconic fragrances</li>
                    <li><strong>Reformulated Classics</strong>: Beloved scents with modern twists</li>
                </ul>
            </div>
        </div>
        <div class="col-md-4">
            <div class="collection-card">
                <h3><i class="fas fa-clock me-2"></i>Vintage Collection</h3>
                <ul class="collection-list">
                    <li><strong>Discontinued Treasures</strong>: Rare finds from fragrance history</li>
                    <li><strong>Retro Classics</strong>: The scents that defined generations</li>
                    <li><strong>Collector's Items</strong>: Highly sought-after vintage formulations</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- Top Brands -->
<section class="container my-6">
    <h2 class="text-center mb-5">Top Perfume & Cologne Brands</h2>
    <div class="row g-4 justify-content-center">
        @foreach (var brand in new[] {
                new { Name = "Jean Paul Gaultier", Image = "7.png", Url = "https://www.jeanpaulgaultier.com" },
                new { Name = "Versace", Image = "9.jpg", Url = "https://www.versace.com" },
                new { Name = "Giorgio Armani", Image = "14.jpeg", Url = "https://www.armani.com" },
                new { Name = "D&G", Image = "18.jpg", Url = "https://www.dolcegabbana.com" },
                new { Name = "Calvin Klein", Image = "21.png", Url = "https://www.calvinklein.com" }
                })
        {
            <div class="col-6 col-md-4 col-lg-2">
                <div class="brand-card">
                    <a href="@brand.Url" target="_blank" rel="noopener noreferrer">
                        <img src="@Url.Content($"~/images/products/{brand.Image}")"
                             alt="@brand.Name"
                             onerror="this.onerror=null;this.src='@Url.Content("~/images/default-brand.jpg")'"
                             class="img-fluid">
                    </a>
                    <div class="brand-name">@brand.Name</div>
                </div>
            </div>
        }
    </div>
    <div class="text-center mt-4">
        <a asp-controller="Brands" asp-action="Index" class="btn btn-view-all">
            View All Brands <i class="fas fa-arrow-right ms-2"></i>
        </a>
    </div>
</section>

<!-- Customer Favorites -->
<section class="container my-6">
    <h2 class="text-center mb-5">Customer Favorites</h2>
    <div class="row g-4">
        @foreach (var product in Model.CustomerFavorites.Take(4))
        {
            <div class="col-md-6 col-lg-3">
                <div class="product-card">
                    <div class="product-image-container">
                        <img src="@Url.Content(ImageService.GetImageUrl(product.ImageUrl ?? "default-perfume.jpg", "default-perfume.jpg"))"
                             alt="@product.Name"
                             class="product-image">
                        @if (product.IsFeatured)
                        {
                            <span class="product-badge featured">
                                <i class="fas fa-crown"></i> Featured
                            </span>
                        }
                    </div>
                    <div class="product-body">
                        <h3 class="product-title">@product.Name</h3>
                        <div class="product-price">@product.Price.ToString("C")</div>
                        <div class="product-actions">
                            <a asp-controller="Product" asp-action="Details" asp-route-id="@product.Id"
                               class="btn btn-outline-dark btn-sm">
                                <i class="fas fa-eye"></i> Details
                            </a>
                            <button class="btn btn-dark btn-sm add-to-cart"
                                    data-product-id="@product.Id"
                                    @(product.StockQuantity <= 0 ? "disabled" : "")>
                                <i class="fas fa-cart-plus"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</section>

<!-- Testimonial -->
<section class="container my-6">
    <div class="testimonial">
        <blockquote>
            "A fragrance is more than a scent - it's an invisible accessory that completes your style,
            a signature that lingers even after you've left the room."
        </blockquote>
        <div class="testimonial-author">
            <strong>Sophia Laurent</strong>, Founder of Noire Essence
        </div>
    </div>
</section>

@section Styles {
    <style>
        :root {
            --purple-dark: #82667F;
            --purple: #B486AB;
            --pink: #DD9AC2;
            --pink-light: #EACBD2;
            --pink-lighter: #F3DDE0;
            --pink-lightest: #F8E8EA;
            --white: #FFFCFD;
        }

        /* Hero Carousel */
        .hero-carousel {
            position: relative;
            overflow: hidden;
            margin-bottom: 4rem;
        }

        .hero-image {
            height: 80vh;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 2rem;
        }

        .hero-content {
            max-width: 800px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* Badges */
        .badge {
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
        }

        /* Collection Cards */
        .collection-card {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            height: 100%;
            box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.05);
            border: 1px solid var(--pink-lighter);
            transition: transform 0.3s ease;
        }

            .collection-card:hover {
                transform: translateY(-5px);
            }

        /* Brand Cards */
        .brand-card {
            text-align: center;
            padding: 1.5rem;
            background: var(--pink-lightest);
            border-radius: 0.5rem;
            border: 1px solid var(--purple);
        }

            .brand-card img {
                height: 80px;
                object-fit: contain;
                margin-bottom: 1rem;
            }

        /* Product Cards */
        .product-card {
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 0.25rem 0.5rem rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

            .product-card:hover {
                box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.1);
                transform: translateY(-3px);
            }

        .product-image-container {
            height: 200px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--pink-lightest);
        }

        .product-image {
            max-height: 100%;
            max-width: 100%;
            object-fit: contain;
        }

        /* Responsive Adjustments */
        @@media (max-width: 768px) {
            .hero-image {
                height: 60vh;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }
        }
    </style>
}

@section Scripts {
    <script>
        // Initialize carousel
        document.addEventListener('DOMContentLoaded', function() {
            const carousel = {
                slides: document.querySelectorAll('.carousel-item'),
                indicators: document.querySelectorAll('.indicator'),
                currentIndex: 0,
                interval: null,

                init() {
                    this.startAutoSlide();
                    this.setupControls();
                },

                startAutoSlide() {
                    this.interval = setInterval(() => {
                        this.nextSlide();
                    }, 5000);
                },

                nextSlide() {
                    this.goToSlide((this.currentIndex + 1) % this.slides.length);
                },

                prevSlide() {
                    this.goToSlide((this.currentIndex - 1 + this.slides.length) % this.slides.length);
                },

                goToSlide(index) {
                    this.slides[this.currentIndex].classList.remove('active');
                    this.indicators[this.currentIndex].classList.remove('active');

                    this.currentIndex = index;

                    this.slides[this.currentIndex].classList.add('active');
                    this.indicators[this.currentIndex].classList.add('active');
                },

                setupControls() {
                    document.querySelector('.carousel-control.next').addEventListener('click', () => {
                        clearInterval(this.interval);
                        this.nextSlide();
                        this.startAutoSlide();
                    });

                    document.querySelector('.carousel-control.prev').addEventListener('click', () => {
                        clearInterval(this.interval);
                        this.prevSlide();
                        this.startAutoSlide();
                    });

                    this.indicators.forEach((indicator, index) => {
                        indicator.addEventListener('click', () => {
                            clearInterval(this.interval);
                            this.goToSlide(index);
                            this.startAutoSlide();
                        });
                    });
                }
            };

            carousel.init();

            // Add to cart functionality
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = this.dataset.productId;
                    // Implement cart logic here
                    console.log('Added product', productId, 'to cart');
                });
            });
        });
    </script>
}